#! /usr/bin/env bash
usage(){ echo "Usage: $(basename $0) f [dir]"; exit 1; }
[[ $# -lt 1 ]] && usage 
FUNC=$1
base=${2:-$(basename $PWD)}  
DIR=~/.w/app/$2 
[[ ! $PWD =~ "$HOME/.w/app" ]] &&  echo "Run within ~/.w/app !" && usage  
[[ "$base" == "bin" ]] &&  echo "Not within ~/.w/app/$base !" && usage  

source ~/.w/app/lib/setup.sh 
( cd $DIR ; [ -f ./setup.sh ] && source ./setup.sh; eval "$FUNC" )
